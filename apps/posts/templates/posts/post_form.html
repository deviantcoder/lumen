{% load widget_tweaks %}
{% load static %}
<form method="POST" action="{% url 'posts:create_post' %}" enctype="multipart/form-data" hx-on::after-settle="initializeDropzone()">
    {% csrf_token %}
    <div class="mb-3 text-start">
        <i class="bi bi-images me-2"></i> 
        <label class="form-label fw-semibold">Media:</label>
        <div id="dropzone" class="dropzone rounded-3 p-5 text-center bg-dark-subtle">
            <p class="text-muted mb-2">Drag & drop files here or click to select</p>
            <input 
                type="file" 
                id="file-input" 
                name="files" 
                multiple 
                hidden
            >
            <button type="button" class="btn btn-outline-light rounded-3" onclick="document.getElementById('file-input').click()">
                Select Files
            </button>
        </div>
        <div id="file-list" class="mt-3 text-muted small"></div>
    </div>
    <div class="mb-3 text-start">
        <i class="bi bi-body-text me-2"></i>
        <label class="form-label fw-semibold" for="caption">Caption:</label>
        {% render_field form.caption class="form-control p-3 rounded-3" rows=4 style="max-height: 300px;" %}
    </div>
    <div class="mb-3 text-start">
        <i class="bi bi-hash me-2"></i> 
        <label class="form-label fw-semibold" for="tags">Tags:</label>
        <input type="text" name="tags" placeholder="Tags" class="form-control p-3 rounded-3">
    </div>
    <button type="submit" class="btn btn-outline-light w-100 mt-2 rounded-3 p-3 fw-bold">Create Post</button>
</form>
<script src="{% static 'js/dropzone.js' %}"></script>